<!DOCTYPE html>
<html>
	<head>
		<title>Eval</title>
        <script type="text/javascript" charset="UTF-8" src="lib/bool.js"></script>
        <script type="text/javascript" charset="UTF-8" src="lib/comp.js"></script>
        <script type="text/javascript" charset="UTF-8" src="lib/cond.js"></script>
        <script type="text/javascript" charset="UTF-8" src="lib/func.js"></script>
        <script type="text/javascript" charset="UTF-8" src="lib/list.js"></script>
        <script type="text/javascript" charset="UTF-8" src="lib/math.js"></script>
        <script type="text/javascript" charset="UTF-8" src="lib/types.js"></script>
		<script type="text/javascript">
			
			/*
				Types:
					Boolean
					Number
					String
					[]

				Todo:
					Generics	T Element([T] l Number i) = ...
					Tuples		Person: {Number Boolean}
					Functions	[B] Map([A] a <A B> f) = ...

				-------------------------------------

				Number Factorial(Number n) = If(Equal(n 0) 1 Mul(n Factorial(Subtract(n 1))))
			*/
 
			/*
				try
		        {
		            ScriptEngineManager manager = new ScriptEngineManager();
		            ScriptEngine engine = manager.getEngineByName("javascript");
		            Object result = engine.eval("");
		            System.out.println(result.toString());
		        }
		        catch (Exception e)
		        {
		            e.printStackTrace();
		        }
			*/

			function run()
			{
				var result = new Factorial(5)
				var value = result.value()
				document.write(value)
				console.log(value)
			}

			function Factorial(n)
			{
				this.value = function()
				{
					return new If(new Equal(n,
											0),
								  1,
		                    	  new Mul(n,
										  new Factorial(new Sub(n,
										  						1)
										  )
								  )
					).value()
				}
			}

		</script>
	</head>
	<body onload="run()">
	</body>
</html>