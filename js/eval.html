<!DOCTYPE html>
<html>
	<head>
		<title>Types</title>
		<script type="text/javascript">
			
			/*
				Types:
					Boolean
					Number
					String
					[]

				Todo:
					Generics	T Element([T] l Number i) = ...
					Tuples		Person: {Number Boolean}
					Functions	[B] Map([A] a <A B> f) = ...

				-------------------------------------

				Number Factorial(Number n) = If(Equal(n 0) 1 Mul(n Factorial(Subtract(n 1))))
			*/
 
			/*
				try
		        {
		            ScriptEngineManager manager = new ScriptEngineManager();
		            ScriptEngine engine = manager.getEngineByName("javascript");
		            Object result = engine.eval("");
		            System.out.println(result.toString());
		        }
		        catch (Exception e)
		        {
		            e.printStackTrace();
		        }
			*/

			if (!Number.prototype.value) 
			{
				Number.prototype.value = function()
				{
					return this.valueOf()
				}
			}

			if (!Boolean.prototype.value) 
			{
				Boolean.prototype.value = function()
				{
					return this.valueOf()
				}
			}

			function run()
			{
				var result = new Factorial(5)
				var value = result.value()
				document.write(value)
				console.log(value)
			}

			function Mul(a, b)
			{
				this.value = function()
				{
					return a.value() * b.value()
				}
			}

			function Sub(a, b)
			{
				this.value = function()
				{
					return a.value() - b.value()
				}
			}

			function Equal(a, b)
			{
				this.value = function()
				{
					return a.value() === b.value()
				}
			}

			function If(a, b, c)
			{
				this.value = function()
				{
					return a.value() ? b.value() : c.value()
				}
			}

			function Factorial(n)
			{
				this.value = function()
				{
					return new If(new Equal(n,
											0),
								  1,
		                    	  new Mul(n,
										  new Factorial(new Sub(n,
										  						1)
										  )
								  )
					).value()
				}
			}

		</script>
	</head>
	<body onload="run()">
	</body>
</html>